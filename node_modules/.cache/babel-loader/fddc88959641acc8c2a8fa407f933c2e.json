{"ast":null,"code":"var _jsxFileName = \"/Users/kushdave/NiftytunesFINAL/ethereum-nft-marketplace-boilerplate/src/components/NFTTokenIds.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { getNativeByChain } from \"helpers/networks\";\nimport { getCollectionsByChain } from \"helpers/collections\";\nimport { useMoralis, useMoralisQuery, useNewMoralisObject } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Badge, Alert, Spin } from \"antd\";\nimport { useNFTTokenIds } from \"hooks/useNFTTokenIds\";\nimport { FileSearchOutlined, RightCircleOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\"\n  },\n  banner: {\n    display: \"flex\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    margin: \"0 auto\",\n    width: \"600px\",\n    //borderRadius: \"10px\",\n    height: \"150px\",\n    marginBottom: \"40px\",\n    paddingBottom: \"20px\",\n    borderBottom: \"solid 1px #e3e3e3\"\n  },\n  logo: {\n    height: \"115px\",\n    width: \"115px\",\n    borderRadius: \"50%\",\n    // positon: \"relative\",\n    // marginTop: \"-80px\",\n    border: \"solid 4px white\"\n  },\n  text: {\n    color: \"#041836\",\n    fontSize: \"27px\",\n    fontWeight: \"bold\"\n  }\n};\n\nfunction NFTTokenIds(_ref) {\n  _s();\n\n  var _NFTTokenIds$, _NFTTokenIds$2;\n\n  let {\n    inputValue,\n    setInputValue\n  } = _ref;\n  const fallbackImg = \"data:image/png;base64,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\";\n  const {\n    NFTTokenIds,\n    totalNFTs,\n    fetchSuccess\n  } = useNFTTokenIds(inputValue);\n  const [visible, setVisibility] = useState(false);\n  const [nftToBuy, setNftToBuy] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const {\n    chainId,\n    marketAddress,\n    contractABI,\n    walletAddress\n  } = useMoralisDapp();\n  const nativeName = getNativeByChain(chainId);\n  const contractABIJson = JSON.parse(contractABI);\n  const {\n    Moralis\n  } = useMoralis();\n  const queryMarketItems = useMoralisQuery(\"MarketItems\");\n  const fetchMarketItems = JSON.parse(JSON.stringify(queryMarketItems.data, [\"objectId\", \"createdAt\", \"price\", \"nftContract\", \"itemId\", \"sold\", \"tokenId\", \"seller\", \"owner\", \"confirmed\"]));\n  const purchaseItemFunction = \"createMarketSale\";\n  const NFTCollections = getCollectionsByChain(chainId);\n\n  async function purchase() {\n    setLoading(true);\n    const tokenDetails = getMarketItem(nftToBuy);\n    const itemID = tokenDetails.itemId;\n    const tokenPrice = tokenDetails.price;\n    const ops = {\n      contractAddress: marketAddress,\n      functionName: purchaseItemFunction,\n      abi: contractABIJson,\n      params: {\n        nftContract: nftToBuy.token_address,\n        itemId: itemID\n      },\n      msgValue: tokenPrice\n    };\n    await contractProcessor.fetch({\n      params: ops,\n      onSuccess: () => {\n        console.log(\"success\");\n        setLoading(false);\n        setVisibility(false);\n        updateSoldMarketItem();\n        succPurchase();\n      },\n      onError: error => {\n        setLoading(false);\n        failPurchase();\n      }\n    });\n  }\n\n  const handleBuyClick = nft => {\n    setNftToBuy(nft);\n    console.log(nft.image);\n    setVisibility(true);\n  };\n\n  function succPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `You have purchased this NFT`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  function failPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `There was a problem when purchasing this NFT`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  async function updateSoldMarketItem() {\n    const id = getMarketItem(nftToBuy).objectId;\n    const marketList = Moralis.Object.extend(\"MarketItems\");\n    const query = new Moralis.Query(marketList);\n    await query.get(id).then(obj => {\n      obj.set(\"sold\", true);\n      obj.set(\"owner\", walletAddress);\n      obj.save();\n    });\n  }\n\n  const getMarketItem = nft => {\n    const result = fetchMarketItems === null || fetchMarketItems === void 0 ? void 0 : fetchMarketItems.find(e => e.nftContract === (nft === null || nft === void 0 ? void 0 : nft.token_address) && e.tokenId === (nft === null || nft === void 0 ? void 0 : nft.token_id) && e.sold === false && e.confirmed === true);\n    return result;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [contractABIJson.noContractDeployed && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Alert, {\n          message: \"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\",\n          type: \"error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), inputValue !== \"explore\" && totalNFTs !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [!fetchSuccess && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Alert, {\n            message: \"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\",\n            type: \"warning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.banner,\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: ((_NFTTokenIds$ = NFTTokenIds[0]) === null || _NFTTokenIds$ === void 0 ? void 0 : _NFTTokenIds$.image) || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: styles.logo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.text,\n            children: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: `${(_NFTTokenIds$2 = NFTTokenIds[0]) === null || _NFTTokenIds$2 === void 0 ? void 0 : _NFTTokenIds$2.name}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: \"15px\",\n                  color: \"#9c9c9c\",\n                  fontWeight: \"normal\"\n                },\n                children: [\"Collection Size: \", `${totalNFTs}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.NFTs,\n        children: [inputValue === \"explore\" && (NFTCollections === null || NFTCollections === void 0 ? void 0 : NFTCollections.map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n          hoverable: true,\n          actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"View Collection\",\n            children: /*#__PURE__*/_jsxDEV(RightCircleOutlined, {\n              onClick: () => setInputValue(nft === null || nft === void 0 ? void 0 : nft.addrs)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 19\n          }, this)],\n          style: {\n            width: 240,\n            border: \"2px solid #e7eaf3\"\n          },\n          cover: /*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: (nft === null || nft === void 0 ? void 0 : nft.image) || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: {\n              height: \"240px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 19\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Meta, {\n            title: nft.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 15\n        }, this))), inputValue !== \"explore\" && NFTTokenIds.slice(0, 20).map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n          hoverable: true,\n          actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"View On Blockexplorer\",\n            children: /*#__PURE__*/_jsxDEV(FileSearchOutlined, {\n              onClick: () => window.open(`${getExplorer(chainId)}address/${nft.token_address}`, \"_blank\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Buy NFT\",\n            children: /*#__PURE__*/_jsxDEV(ShoppingCartOutlined, {\n              onClick: () => handleBuyClick(nft)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 19\n          }, this)],\n          style: {\n            width: 240,\n            border: \"2px solid #e7eaf3\"\n          },\n          cover: /*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: nft.image || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: {\n              height: \"240px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 19\n          }, this),\n          children: [getMarketItem(nft) && /*#__PURE__*/_jsxDEV(Badge.Ribbon, {\n            text: \"Buy Now\",\n            color: \"green\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Meta, {\n            title: nft.name,\n            description: `#${nft.token_id}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), getMarketItem(nftToBuy) ? /*#__PURE__*/_jsxDEV(Modal, {\n        title: `Buy ${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.name} #${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.token_id}`,\n        visible: visible,\n        onCancel: () => setVisibility(false),\n        onOk: () => purchase(),\n        okText: \"Buy\",\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          spinning: loading,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"250px\",\n              margin: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Badge.Ribbon, {\n              color: \"green\",\n              text: `${getMarketItem(nftToBuy).price / (\"1e\" + 18)} ${nativeName}`,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.image,\n                style: {\n                  width: \"250px\",\n                  borderRadius: \"10px\",\n                  marginBottom: \"15px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Modal, {\n        title: `Buy ${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.name} #${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.token_id}`,\n        visible: visible,\n        onCancel: () => setVisibility(false),\n        onOk: () => setVisibility(false),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.image,\n          style: {\n            width: \"250px\",\n            margin: \"auto\",\n            borderRadius: \"10px\",\n            marginBottom: \"15px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          message: \"This NFT is currently not for sale\",\n          type: \"warning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(NFTTokenIds, \"m3cAqoq5c5AhW/3/EjFQPe2FUgo=\", false, function () {\n  return [useNFTTokenIds, useWeb3ExecuteFunction, useMoralisDapp, useMoralis, useMoralisQuery];\n});\n\n_c = NFTTokenIds;\nexport default NFTTokenIds;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFTTokenIds\");","map":{"version":3,"sources":["/Users/kushdave/NiftytunesFINAL/ethereum-nft-marketplace-boilerplate/src/components/NFTTokenIds.jsx"],"names":["React","useState","useEffect","getNativeByChain","getCollectionsByChain","useMoralis","useMoralisQuery","useNewMoralisObject","Card","Image","Tooltip","Modal","Badge","Alert","Spin","useNFTTokenIds","FileSearchOutlined","RightCircleOutlined","ShoppingCartOutlined","useMoralisDapp","getExplorer","useWeb3ExecuteFunction","Meta","styles","NFTs","display","flexWrap","WebkitBoxPack","justifyContent","margin","maxWidth","gap","banner","alignItems","width","height","marginBottom","paddingBottom","borderBottom","logo","borderRadius","border","text","color","fontSize","fontWeight","NFTTokenIds","inputValue","setInputValue","fallbackImg","totalNFTs","fetchSuccess","visible","setVisibility","nftToBuy","setNftToBuy","loading","setLoading","contractProcessor","chainId","marketAddress","contractABI","walletAddress","nativeName","contractABIJson","JSON","parse","Moralis","queryMarketItems","fetchMarketItems","stringify","data","purchaseItemFunction","NFTCollections","purchase","tokenDetails","getMarketItem","itemID","itemId","tokenPrice","price","ops","contractAddress","functionName","abi","params","nftContract","token_address","msgValue","fetch","onSuccess","console","log","updateSoldMarketItem","succPurchase","onError","error","failPurchase","handleBuyClick","nft","image","secondsToGo","modal","success","title","content","setTimeout","destroy","id","objectId","marketList","Object","extend","query","Query","get","then","obj","set","save","result","find","e","tokenId","token_id","sold","confirmed","noContractDeployed","undefined","name","map","index","addrs","slice","window","open"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getNativeByChain } from \"helpers/networks\";\nimport { getCollectionsByChain } from \"helpers/collections\";\nimport {\n  useMoralis,\n  useMoralisQuery,\n  useNewMoralisObject,\n} from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Badge, Alert, Spin } from \"antd\";\nimport { useNFTTokenIds } from \"hooks/useNFTTokenIds\";\nimport {\n  FileSearchOutlined,\n  RightCircleOutlined,\n  ShoppingCartOutlined,\n} from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nconst { Meta } = Card;\n\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\",\n  },\n  banner: {\n    display: \"flex\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    margin: \"0 auto\",\n    width: \"600px\",\n    //borderRadius: \"10px\",\n    height: \"150px\",\n    marginBottom: \"40px\",\n    paddingBottom: \"20px\",\n    borderBottom: \"solid 1px #e3e3e3\",\n  },\n  logo: {\n    height: \"115px\",\n    width: \"115px\",\n    borderRadius: \"50%\",\n    // positon: \"relative\",\n    // marginTop: \"-80px\",\n    border: \"solid 4px white\",\n  },\n  text: {\n    color: \"#041836\",\n    fontSize: \"27px\",\n    fontWeight: \"bold\",\n  },\n};\n\nfunction NFTTokenIds({ inputValue, setInputValue }) {\n  const fallbackImg =\n    \"data:image/png;base64,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\";\n  const { NFTTokenIds, totalNFTs, fetchSuccess } = useNFTTokenIds(inputValue);\n  const [visible, setVisibility] = useState(false);\n  const [nftToBuy, setNftToBuy] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const { chainId, marketAddress, contractABI, walletAddress } =\n    useMoralisDapp();\n  const nativeName = getNativeByChain(chainId);\n  const contractABIJson = JSON.parse(contractABI);\n  const { Moralis } = useMoralis();\n  const queryMarketItems = useMoralisQuery(\"MarketItems\");\n  const fetchMarketItems = JSON.parse(\n    JSON.stringify(queryMarketItems.data, [\n      \"objectId\",\n      \"createdAt\",\n      \"price\",\n      \"nftContract\",\n      \"itemId\",\n      \"sold\",\n      \"tokenId\",\n      \"seller\",\n      \"owner\",\n      \"confirmed\",\n    ])\n  );\n  const purchaseItemFunction = \"createMarketSale\";\n  const NFTCollections = getCollectionsByChain(chainId);\n\n  async function purchase() {\n    setLoading(true);\n    const tokenDetails = getMarketItem(nftToBuy);\n    const itemID = tokenDetails.itemId;\n    const tokenPrice = tokenDetails.price;\n    const ops = {\n      contractAddress: marketAddress,\n      functionName: purchaseItemFunction,\n      abi: contractABIJson,\n      params: {\n        nftContract: nftToBuy.token_address,\n        itemId: itemID,\n      },\n      msgValue: tokenPrice,\n    };\n\n    await contractProcessor.fetch({\n      params: ops,\n      onSuccess: () => {\n        console.log(\"success\");\n        setLoading(false);\n        setVisibility(false);\n        updateSoldMarketItem();\n        succPurchase();\n      },\n      onError: (error) => {\n        setLoading(false);\n        failPurchase();\n      },\n    });\n  }\n\n  const handleBuyClick = (nft) => {\n    setNftToBuy(nft);\n    console.log(nft.image);\n    setVisibility(true);\n  };\n\n  function succPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `You have purchased this NFT`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  function failPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `There was a problem when purchasing this NFT`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  async function updateSoldMarketItem() {\n    const id = getMarketItem(nftToBuy).objectId;\n    const marketList = Moralis.Object.extend(\"MarketItems\");\n    const query = new Moralis.Query(marketList);\n    await query.get(id).then((obj) => {\n      obj.set(\"sold\", true);\n      obj.set(\"owner\", walletAddress);\n      obj.save();\n    });\n  }\n\n  const getMarketItem = (nft) => {\n    const result = fetchMarketItems?.find(\n      (e) =>\n        e.nftContract === nft?.token_address &&\n        e.tokenId === nft?.token_id &&\n        e.sold === false &&\n        e.confirmed === true\n    );\n    return result;\n  };\n\n  return (\n    <>\n      <div>\n        {contractABIJson.noContractDeployed && (\n          <>\n            <Alert\n              message=\"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\"\n              type=\"error\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )}\n        {inputValue !== \"explore\" && totalNFTs !== undefined && (\n          <>\n            {!fetchSuccess && (\n              <>\n                <Alert\n                  message=\"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\"\n                  type=\"warning\"\n                />\n                <div style={{ marginBottom: \"10px\" }}></div>\n              </>\n            )}\n            <div style={styles.banner}>\n              <Image\n                preview={false}\n                src={NFTTokenIds[0]?.image || \"error\"}\n                fallback={fallbackImg}\n                alt=\"\"\n                style={styles.logo}\n              />\n              <div style={styles.text}>\n                <>\n                  <div>{`${NFTTokenIds[0]?.name}`}</div>\n                  <div\n                    style={{\n                      fontSize: \"15px\",\n                      color: \"#9c9c9c\",\n                      fontWeight: \"normal\",\n                    }}\n                  >\n                    Collection Size: {`${totalNFTs}`}\n                  </div>\n                </>\n              </div>\n            </div>\n          </>\n        )}\n\n        <div style={styles.NFTs}>\n          {inputValue === \"explore\" &&\n            NFTCollections?.map((nft, index) => (\n              <Card\n                hoverable\n                actions={[\n                  <Tooltip title=\"View Collection\">\n                    <RightCircleOutlined\n                      onClick={() => setInputValue(nft?.addrs)}\n                    />\n                  </Tooltip>,\n                ]}\n                style={{ width: 240, border: \"2px solid #e7eaf3\" }}\n                cover={\n                  <Image\n                    preview={false}\n                    src={nft?.image || \"error\"}\n                    fallback={fallbackImg}\n                    alt=\"\"\n                    style={{ height: \"240px\" }}\n                  />\n                }\n                key={index}\n              >\n                <Meta title={nft.name} />\n              </Card>\n            ))}\n\n          {inputValue !== \"explore\" &&\n            NFTTokenIds.slice(0, 20).map((nft, index) => (\n              <Card\n                hoverable\n                actions={[\n                  <Tooltip title=\"View On Blockexplorer\">\n                    <FileSearchOutlined\n                      onClick={() =>\n                        window.open(\n                          `${getExplorer(chainId)}address/${nft.token_address}`,\n                          \"_blank\"\n                        )\n                      }\n                    />\n                  </Tooltip>,\n                  <Tooltip title=\"Buy NFT\">\n                    <ShoppingCartOutlined onClick={() => handleBuyClick(nft)} />\n                  </Tooltip>,\n                ]}\n                style={{ width: 240, border: \"2px solid #e7eaf3\" }}\n                cover={\n                  <Image\n                    preview={false}\n                    src={nft.image || \"error\"}\n                    fallback={fallbackImg}\n                    alt=\"\"\n                    style={{ height: \"240px\" }}\n                  />\n                }\n                key={index}\n              >\n                {getMarketItem(nft) && (\n                  <Badge.Ribbon text=\"Buy Now\" color=\"green\"></Badge.Ribbon>\n                )}\n                <Meta title={nft.name} description={`#${nft.token_id}`} />\n              </Card>\n            ))}\n        </div>\n        {getMarketItem(nftToBuy) ? (\n          <Modal\n            title={`Buy ${nftToBuy?.name} #${nftToBuy?.token_id}`}\n            visible={visible}\n            onCancel={() => setVisibility(false)}\n            onOk={() => purchase()}\n            okText=\"Buy\"\n          >\n            <Spin spinning={loading}>\n              <div\n                style={{\n                  width: \"250px\",\n                  margin: \"auto\",\n                }}\n              >\n                <Badge.Ribbon\n                  color=\"green\"\n                  text={`${\n                    getMarketItem(nftToBuy).price / (\"1e\" + 18)\n                  } ${nativeName}`}\n                >\n                  <img\n                    src={nftToBuy?.image}\n                    style={{\n                      width: \"250px\",\n                      borderRadius: \"10px\",\n                      marginBottom: \"15px\",\n                    }}\n                  />\n                </Badge.Ribbon>\n              </div>\n            </Spin>\n          </Modal>\n        ) : (\n          <Modal\n            title={`Buy ${nftToBuy?.name} #${nftToBuy?.token_id}`}\n            visible={visible}\n            onCancel={() => setVisibility(false)}\n            onOk={() => setVisibility(false)}\n          >\n            <img\n              src={nftToBuy?.image}\n              style={{\n                width: \"250px\",\n                margin: \"auto\",\n                borderRadius: \"10px\",\n                marginBottom: \"15px\",\n              }}\n            />\n            <Alert\n              message=\"This NFT is currently not for sale\"\n              type=\"warning\"\n            />\n          </Modal>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default NFTTokenIds;\n"]},"metadata":{},"sourceType":"module"}